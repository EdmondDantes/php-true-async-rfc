### Comparison Table

| **Language**      | **Asynchrony Model**                                                         | **Structured Concurrency**                                                              | **Function Coloring**                          | **Cancellation Mechanism**                                         | **Error Detection / Error Handling**                                                                                                                                                         | **Learning Complexity**                                                      | **Additional Notes**                                                                                                    |
|-------------------|------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|------------------------------------------------|--------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
| **True Async**    | `spawn + await`, `suspend`, and optional `TaskGroup`.                        | **Yes.** Via `Scope` (child scopes, hierarchical tasks).                                | **No** (any function can become a coroutine)   | `CancellationException` + `until` syntax. Method `cancel()`        | Warnings for “zombie” coroutines, `setExceptionHandler`, Graceful Shutdown if unhandled, stuck-task detection, optional exception handlers.                                                  | **Medium / somewhat high** (new keywords + structured concurrency patterns). | Does not implement true parallelism.                                                                                    |
| **Go**            | Goroutines + channels, no built-in `await`.                                  | **No** (or manual approaches with `WaitGroup`, channels).                               | **No**                                         | Context-based cancellation or manual checks.                       | No direct built-in supervision; errors can be returned or handled via `panic/recover`. Goroutines may keep running if not explicitly ended.                                                  | **Low** (syntax is simple, though hidden goroutine leaks are possible).      | Common, well-supported but easy to “leak” goroutines in complex cases.                                                  |
| **Kotlin**        | `suspend` functions + coroutines in the stdlib.                              | **Yes.** `coroutineScope`, `supervisorScope`.                                           | **Yes** (`suspend` “colors” methods)           | Cooperative: `Job.cancel()`.                                       | Built-in cancellation, aggregated exceptions, `supervisorJob` can isolate child failures.                                                                                                    | **Medium** (needs `suspend` keyword and understanding coroutines).           | Powerful concurrency with structured scopes, but function “coloring” is mandatory.                                      |
| **C#**            | `async/await` with `Task`; often uses the TPL (`Task Parallel Library`).     | **No** (manual via `Task.WaitAll` or other patterns).                                   | **Yes** (`async`/`await` “colors” methods)     | Cooperative with `CancellationToken`.                              | Typically `AggregateException` for parallel errors; standard `try/catch` for sequential logic. More advanced patterns need custom frameworks.                                                | **Medium** (familiar syntax, but advanced usage can be tricky).              | Large ecosystem. Structured concurrency is not built-in but can be emulated.                                            |
| **Python**        | `asyncio` event loop + `async/await`. `TaskGroup` introduced in Python 3.11. | **Partially.** `TaskGroup` (3.11+) covers grouped tasks but not full structure.         | **Yes** (`async def`)                          | `Task.cancel()` or manual checks.                                  | Exceptions bubble up in tasks; partial grouping with `TaskGroup`. No built-in supervision like a full hierarchy.                                                                             | **Medium** (simple syntax but `asyncio` can be complex).                     | **GIL** limits true parallelism. Some third-party libraries add advanced patterns.                                      |
| **Java (Loom)**   | Virtual threads (experimental) + traditional futures/executors.              | **In progress.** `StructuredTaskScope` is under development for structured concurrency. | **No**                                         | `Thread.interrupt()` or `Future.cancel()`, details vary with Loom. | Standard try/catch, or new `StructuredTaskScope` patterns that may aggregate/cancel tasks. Still partly experimental.                                                                        | **Medium** (threads are familiar, but Loom’s details are new).               | Loom may simplify concurrency without “coloring.” Still evolving and experimental.                                      |
| **Erlang/Elixir** | Actor model (lightweight processes) + message passing (“let it crash”).      | **Yes.** Supervisor trees for robust fault-tolerance.                                   | **No**                                         | Killing a process from outside or letting it crash & be restarted. | Powerful supervision system: if a process crashes, the supervisor restarts it. Very fault-tolerant.                                                                                          | **Medium** (actor model is straightforward but different from `await`).      | Renowned for high fault tolerance (“let it crash” philosophy). Supervision trees provide robust structured concurrency. |

#### Parallels with Java Loom

This **RFC** unintentionally contains many parallels with the Java Loom StructuredTaskScope API,
which is very similar to this **RFC**.

| **Feature**               | **PHP True Async (Scope)**                                                                                                                                                     | **Java Loom (StructuredTaskScope)**                                                                                         |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| **Creation**              | `new Scope()` or `Scope::inherit()` to form hierarchical concurrency; `TaskGroup` for grouped tasks. `async $scope {}` can define bounded or inherited scopes automatically.   | `new StructuredTaskScope<>()` or specialized subtypes to manage forked virtual threads.                                     |
| **Task Launch**           | `spawn someTask()` or `spawn with $scope someTask()`.                                                                                                                          | `scope.fork(() -> someTask())` inside the `StructuredTaskScope` block.                                                      |
| **Hierarchy**             | Scopes can form a tree of child scopes; canceling a parent scope cancels all children. `TaskGroup` is optional but can reference a scope.                                      | `StructuredTaskScope` can nest calls (`fork()` in sub-scopes). Canceling/closing a parent can interrupt child tasks.        |
| **Awaiting**              | `await spawn someFn()` for a single coroutine; `await $taskGroup` collects grouped results; `Scope::awaitCompletion` to wait for all implicit tasks.                           | `scope.join()` to wait for all forked tasks, or individual `Future.get()`.                                                  |
| **Bounded Execution**     | `$scope->cancel()` auto-cancels any child tasks left running once the block ends. A `TaskGroup` can be flagged as bounded too.                                                 | Exiting the structured concurrency block ends sub-tasks: they are joined or canceled.                                       |
| **Cancellation**          | `$scope->cancel()` or `$coroutine->cancel()` raises `CancellationException`. `await ... until <token>` for timeouts. `dispose()` forcibly ends tasks.                          | `scope.shutdown()`, `scope.close()`, or `Thread.interrupt()` can stop the tasks, typically throwing `InterruptedException`. |
| **Exception Handling**    | Unhandled exceptions bubble upward. Use `Scope::setExceptionHandler()` for scope-level or child-scope errors. `TaskGroup` can capture/aggregate child errors.                  | `scope.join()` or `scope.throwIfFailed()` may propagate aggregated exceptions. Standard `try/catch` also applies.           |
| **Automatic Cleanup**     | `dispose()`, `disposeSafely()`, or `disposeAfterTimeout()` forcibly or gracefully end tasks. `TaskGroup->dispose()` also cancels tasks. `onFinally()` is like a `defer`.       | `try (var scope = new StructuredTaskScope<>()) { ... }` auto-closes tasks (join/interrupt) on exiting the try-block.        |
| **Context Inheritance**   | Each `Scope` has a `.context`; child scopes inherit from parents. There's also a coroutine-level local context.                                                                | `ScopedValues` or `ThreadLocal` for carrying data in virtual threads. Not directly integrated with `StructuredTaskScope`.   |
| **Goals**                 | Transparent coroutines, structured concurrency, safe cancellation, no function coloring. `TaskGroup` for partial grouping. Inherits or bounds child tasks for resource safety. | Virtual threads for simpler concurrency, aiming for structured concurrency in standard Java. Loom is still evolving.        |
